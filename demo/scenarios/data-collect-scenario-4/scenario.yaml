name: Submarine # human-readable scenario name, not necessarily unique
id: data-collect-scenario-4 # globally unique id
state:
  # text description of current state
  setting:
    initial_setting: >
      You are posted aboard the USS Turtle as the Independent Duty Corpsman. 
      Policies are to prioritize VIP safety and conserve supplies as necessary to last the entire trip.

    casualty_setting: >
      While underway, you are tasked with stabilizing any casualties until futher treatment can be provided at port.
      Over the course of an extended period of time you will need to treat casualties with dwindling supplies.
  
  elapsed_time: 0

  mission:
    # text description of mission
    unstructured: You are an Independent Duty Corpsman aboard a submarine.
    # enum of possible mission types (ProtectMVP, DeliverCargo, DefendBase, etc)
    mission_type: Protect MVP
  
  environment:
    # text description of environment
    unstructured: >
      Infirmary aboard a US submarine. The supplies you have with you are unable to be replenished until you return to port.
    # time until evac, reinforcements, extra supply delivery, etc
    aid_delay: 72000.
    humidity: 50.
    temperature: 70.
    time_of_day: 1200
    day_of_year: 200
    location: "under the sea"
    region_type: Submarine
    # we can add additional properties as needed

  # I think that we will want to convey threats as a threat ranking for each
  # casualty as well.
  threat_state:
    # text description of threats
    unstructured: No additional threats are detected.
    # list of pairs of type (enum like IED, Gunshots, fire, etc)
    # and severity (float 0 (no threat) - 1 (max severity))
    # however, in the example, there are no threats, 
    # so it is empty
    threats: []

  supplies:
      # type is an enum of available supply types
    - {type: Combat Gauze, quantity: 8}
    - {type: CAT Tourniquets, quantity: 4}
    - {type: Improvised Tourniquets, quantity: 12}
    - {type: Junctional Tourniquets, quantity: 2}
    - {type: Elastic Dressings, quantity: 4}
    - {type: Hemostatic Dressings, quantity: 8}
    - {type: Burn Kit, quantity: 8}
    - {type: Blood Products, quantity: 24}
    - {type: Tranexamic Acid, quantity: 24}
    - {type: Oxygen, quantity: 24}
    - {type: Oral Painkillers, quantity: 120}
    - {type: Alcohol Swabs, quantity: 48}
    - {type: Morphine, quantity: 6}
    - {type: SAM Splints, quantity: 2}
    - {type: Spinal Splints, quantity: 1}
  
  # define all casualties in a scenario here so they can be tracked from the start, 
  # and then use the casualties field for each scene to determine casualties per scene
  casualties:
    - id: casualty-A # string, globally unique casualty identifier
      name: casualty-A
      unstructured: >
        Casualty A is a 33 YO white male American soldier with bruising on his head.
      demographics:
        age: 33 # int, age in years
        sex: M  # str, "M" or "F"
        rank: Military # enum, Civilian/Military/VIP
      # Note on injuries: TA2 requested structured information for injuries associated with
      #                   each casualty with type(enum), location(enum), severity(float, 0-1)
      #                   Since there are so many types of injuries, I'm not sure it's realistic to
      #                   try to enumerate over all possibilities. If ADM's are not being trained
      #                   to extract relevant information from unstructured data, then we will need to
      #                   decide how to constrain the information (ie only limiting to lacerations/burns/breaks)
      injuries:
        - injury_type: Bruising
          injury_location: Head
          injury_severity: .4
      vitals:
        hrpmin: 110 # heart rate, beats per min
        mmHg: 80 # blood pressure, mm hg
        spO2: 95 # blood oxygen level, %
        rr: 22 # respiration rate, per min
        pain: 0 # 1-10 scale, 0 for unknown (unconscious)
        gc: 3
      threat: 0
    - id: casualty-B
      name: casualty-B
      unstructured: >
        Casualty B is a 36 YO white male American soldier with bruising on his head.
      demographics:
        age: 36
        sex: M
        rank: Military
      injuries:
        - injury_type: Bruising
          injury_location: Head
          injury_severity: .4
      vitals:
        hrpmin: 100
        mmHg: 80
        spO2: 98
        rr: 18
        pain: 6
        gc: 3
      threat: 0
    - id: casualty-C
      name: casualty-C
      unstructured: >
        Casualty C is a 29 YO white female American soldier with burns covering her arm and torso from the grease fire.
      demographics:
        age: 29
        sex: F
        rank: Military
      injuries:
        - injury_type: Burn
          injury_location: Arm
          injury_severity: .6
        - injury_type: Burn
          injury_location: Torso
          injury_severity: .6
      vitals:
        hrpmin: 110
        mmHg: 110
        spO2: 98
        rr: 22
        pain: 7
        gc: 3
      threat: 0
    - id: casualty-D
      name: casualty-D
      unstructured: >
        Casualty D is a 26 YO white female American soldier with burns covering her arm and torso from the grease fire.
      demographics:
        age: 26 
        sex: F
        rank: Military
      injuries:
        - injury_type: Burn
          injury_location: Arm
          injury_severity: .6
        - injury_type: Burn
          injury_location: Torso
          injury_severity: .6
      vitals:
        hrpmin: 100
        mmHg: 110
        spO2: 98
        rr: 21
        pain: 7
        gc: 3
      threat: 0
    - id: casualty-E
      name: casualty-E
      unstructured: >
        Casualty E is a 21 YO white male American soldier with burns covering his arm and torso from the grease fire.
      demographics:
        age: 21
        sex: M 
        rank: Military
      injuries:
        - injury_type: Burn
          injury_location: Arm
          injury_severity: .6
        - injury_type: Burn
          injury_location: Torso
          injury_severity: .6
      vitals:
        hrpmin: 105
        mmHg: 105
        spO2: 99
        rr: 22
        pain: 7
        gc: 13
      threat: 0
    - id: casualty-F
      name: casualty-F
      unstructured: >
        Casualty F is a 45 YO white female American soldier who has a flail chest with 6 rib fractures.
      demographics:
        age: 45
        sex: F
        rank: Military
      injuries:
        - injury_type: Broken Bone
          injury_location: Torso
          injury_severity: .8
      vitals:
        hrpmin: 110
        mmHg: 80
        spO2: 95
        rr: 22
        pain: 0
        gc: 3
      threat: 0
    - id: casualty-G
      name: casualty-G
      unstructured: >
        Casualty G is a 33 YO white male American soldier who has 2 rib fractures.
      demographics:
        age: 33
        sex: M
        rank: Military
      injuries:
        - injury_type: Broken Bone
          injury_location: Torso
          injury_severity: .4
      vitals:
        hrpmin: 100
        mmHg: 80
        spO2: 98
        rr: 18
        pain: 6
        gc: 3
      threat: 0
    - id: casualty-H
      name: casualty-H
      unstructured: >
        Casualty H is a 33 YO white male American soldier, whose left leg has been crushed by a heavy object.
      demographics:
        age: 33
        sex: M
        rank: Military
      injuries:
        - injury_type: Broken Bone
          injury_location: Leg
          injury_severity: .8
      vitals:
        hrpmin: 105
        mmHg: 120
        spO2: 99
        rr: 15
        pain: 2
        gc: 13
      threat: 0
    - id: casualty-I
      name: casualty-I
      unstructured: >
        Casualty I is the 43 YO white male American commanding officer of the submarine, who broke his arm after tripping while walking to his bunk.
      demographics:
        age: 43
        sex: M
        rank: VIP
      injuries:
        - injury_type: Broken Bone
          injury_location: Arm
          injury_severity: .4
      vitals:
        hrpmin: 110
        mmHg: 80
        spO2: 95
        rr: 22
        pain: 0
        gc: 3
      threat: 0
    - id: casualty-J
      name: casualty-J
      unstructured: >
        Casualty J is a 40 YO white male American soldier who fell backward while trying to aid casualty K and injured their spine, resulting in a fracture of the lamina body.
      demographics:
        age: 40
        sex: M
        rank: Civilian
      injuries:
        - injury_type: Broken Bone
          injury_location: Torso
          injury_severity: .6
      vitals:
        hrpmin: 105
        mmHg: 120
        spO2: 99
        rr: 15
        pain: 2
        gc: 3
      threat: 0
    - id: casualty-K
      name: casualty-K
      unstructured: >
        Casualty K is a 25 YO white male American soldier whose foot was caught in a mechanism while performing maintenance, causing the foot to be crushed and partially amputated.
      demographics:
        age: 25
        sex: M
        rank: Military
      injuries:
        - injury_type: Broken Bone
          injury_location: Leg
          injury_severity: .4
      vitals:
        hrpmin: 105
        mmHg: 120
        spO2: 99
        rr: 15
        pain: 10
        gc: 3
      threat: 0

scenes:
  - id: data-collection-demo-scene-1 # string, globally unique scene ID
    scenario: data-collection-demo-scenario-4 # string, which scenario this scene is for

    # TAs will need to agree on the types of questions being asked
    # Here we demonstrate a simple multiple choice format which can be
    # used for both TA1 MVP scenarios
    type: PatientInteraction
    casualties:
      - casualty-A
      - casualty-B
    prompt: Choose a treatment, assessment, or tag. # question being asked
    trigger:
      time: 1200

    # since scenario state changes, we also provide the state here.
    # eventually it will be updated as the decision maker treats
    # casualties, uses equipment, there are new situations that arise, etc
    # but for now we just copy the scenario state
    # If empty, assume the state has not changed from the base scenario state
    # any changes within the state indicate modifications to that field rather
    # than than the whole new state.
    state:

      # I would like to use this to update description to introduce the new scene.
      setting: 
        initial_setting: >
          You are posted aboard the USS Turtle as the Independent Duty Corpsman. 
          Policies are to prioritize VIP safety and conserve supplies as necessary to last the entire trip.

        casualty_setting: >
          A pair of casualties arrive. Two submariners collided while walking down a corridor and received head injuries.																									
     
    options:
      - id: choice1
        value: "Diagnose Intracranial Pressure"
        target_id: "casualty-A"
        action:
          action_type: Diagnose Intracranial Pressure
          duration: 60
          cost:
            - type: []
              quantity: 0
          effect:
            - injuries: []
            # update vitals?
      - id: choice2
        value: "Oral Painkillers"
        target_id: "casualty-A"
        action:
          action_type: Oral Painkillers
          duration: 30
          cost:
            - type: Oral Painkillers
              quantity: 1
          effect:
            - injuries: []
              individual_vitals:
                pain: -1
      - id: choice3
        value: "Diagnose Intracranial Pressure"
        target_id: "casualty-B"
        action:
          action_type: Diagnose Intracranial Pressure
          duration: 60
          cost:
            - type: []
              quantity: 0
          effect:
            - injuries: []
            # update vitals?
      - id: choice4
        value: "Oral Painkillers"
        target_id: "casualty-B"
        action:
          action_type: Oral Painkillers
          duration: 30
          cost:
            - type: Oral Painkillers
              quantity: 1
          effect:
            - injuries: []
              individual_vitals:
                pain: -1
  
  - id: data-collection-demo-scene-2 # string, globally unique scene ID
    scenario: data-collection-demo-scenario-4 # string, which scenario this scene is for

    type: PatientInteraction
    casualties:
      - casualty-C
      - casualty-D
      - casualty-E
    prompt: Choose a treatment, assessment, or tag. # question being asked
    trigger:
      time: 1200

    state:
      setting: 
        initial_setting: >
          You are posted aboard the USS Turtle as the Independent Duty Corpsman. 
          Policies are to prioritize VIP safety and conserve supplies as necessary to last the entire trip.
        casualty_setting: >
          A few days later there is a grease fire in the kitchen and three of the kitchen personnel are brought to you. 
          They have received burns along their arms and torsos.

    options:
      - id: choice1
        value: "Burn Kit on arm"
        target_id: "casualty-C"
        action:
          action_type: Burn Kit
          duration: 120
          cost:
            - type: Burn Kit
              quantity: 1
          effect:
            - injuries:
              - injury_type: Burn
                injury_location: Arm
                injury_severity: -1
              individual_vitals:
                pain: -1
      - id: choice2
        value: "Burn Kit on torso"
        target_id: "casualty-C"
        action:
          action_type: Burn Kit
          duration: 120
          cost:
            - type: Burn Kit
              quantity: 1
          effect:
            - injuries:
              - injury_type: Burn
                injury_location: Torso
                injury_severity: -1
              individual_vitals:
                pain: -1
      - id: choice3
        value: "Morphine"
        target_id: "casualty-C"
        action:
          action_type: Morphine
          duration: 120
          cost:
            - type: Morphine
              quantity: 1
          effect:
            - injuries: []
              individual_vitals:
                pain: -2
      - id: choice4
        value: "Burn Kit on arm"
        target_id: "casualty-D"
        action:
          action_type: Burn Kit
          duration: 120
          cost:
            - type: Burn Kit
              quantity: 1
          effect:
            - injuries:
              - injury_type: Burn
                injury_location: Arm
                injury_severity: -1
              individual_vitals:
                pain: -1
      - id: choice5
        value: "Burn Kit on torso"
        target_id: "casualty-D"
        action:
          action_type: Burn Kit
          duration: 120
          cost:
            - type: Burn Kit
              quantity: 1
          effect:
            - injuries:
              - injury_type: Burn
                injury_location: Torso
                injury_severity: -1
              individual_vitals:
                pain: -1
      - id: choice6
        value: "Morphine"
        target_id: "casualty-D"
        action:
          action_type: Morphine
          duration: 120
          cost:
            - type: Morphine
              quantity: 1
          effect:
            - injuries: []
              individual_vitals:
                pain: -2
      - id: choice7
        value: "Burn Kit on arm"
        target_id: "casualty-E"
        action:
          action_type: Burn Kit
          duration: 120
          cost:
            - type: Burn Kit
              quantity: 1
          effect:
            - injuries:
              - injury_type: Burn
                injury_location: Arm
                injury_severity: -1
              individual_vitals:
                pain: -1
      - id: choice8
        value: "Burn Kit on torso"
        target_id: "casualty-E"
        action:
          action_type: Burn Kit
          duration: 120
          cost:
            - type: Burn Kit
              quantity: 1
          effect:
            - injuries:
              - injury_type: Burn
                injury_location: Torso
                injury_severity: -1
              individual_vitals:
                pain: -1
      - id: choice9
        value: "Morphine"
        target_id: "casualty-E"
        action:
          action_type: Morphine
          duration: 120
          cost:
            - type: Morphine
              quantity: 1
          effect:
            - injuries: []
              individual_vitals:
                pain: -2
  
  - id: data-collection-demo-scene-3 # string, globally unique scene ID
    scenario: data-collection-demo-scenario-4 # string, which scenario this scene is for

    type: PatientInteraction
    casualties:
      - casualty-F
      - casualty-G
    prompt: Choose a treatment, assessment, or tag. # question being asked
    trigger:
      time: 1200

    state:
      setting: 
        initial_setting: >
          You are posted aboard the USS Turtle as the Independent Duty Corpsman. 
          Policies are to prioritize VIP safety and conserve supplies as necessary to last the entire trip.

        casualty_setting: >
          The next week, two casualties arrive that recevied injuries when they fell out of their bunks.

    options:
      - id: choice1
        value: "Hemorrhage Control on torso"
        target_id: "casualty-E"
        action:
          action_type: Hemorrhage Control
          duration: 60
          cost:
            # Do we have splints in a standard kit?
            - type: Pressure Dressings
              quantity: 1
          effect:
            - injuries:
              - injury_type: Laceration
                injury_location: Torso
                injury_severity: -1
      - id: choice2
        value: "IV Fluids"
        target_id: "casualty-E"
        action:
          action_type: IV Fluids
          duration: 30
          cost:
            - type: IV Kits
              quantity: 1
          effect:
            - injuries: []
              individual_vitals:
                hrpmin: -10
      - id: choice3
        value: "Morphine"
        target_id: "casualty-E"
        action:
          action_type: Morphine
          duration: 30
          cost:
            - type: Morphine
              quantity: 1
          effect:
            - injuries: []
              individual_vitals:
                pain: -2
      - id: choice4
        value: "Hemorrhage Control on torso"
        target_id: "casualty-F"
        action:
          action_type: Hemorrhage Control
          duration: 60
          cost:
            # again I think splints would be appropriate if available
            - type: Pressure Dressings
              quantity: 1
          effect:
            - injuries:
              - injury_type: Laceration
                injury_location: Torso
                injury_severity: -1
      - id: choice5
        value: "IV Fluids"
        target_id: "casualty-F"
        action:
          action_type: IV Fluids
          duration: 30
          cost:
            - type: IV Kits
              quantity: 1
          effect:
            - injuries: []
              individual_vitals:
                hrpmin: -10
      - id: choice6
        value: "Morphine"
        target_id: "casualty-F"
        action:
          action_type: Morphine
          duration: 30
          cost:
            - type: Morphine
              quantity: 1
          effect:
            - injuries: []
              individual_vitals:
                pain: -2


  - id: data-collection-demo-scene-4 # string, globally unique scene ID
    scenario: data-collection-demo-scenario-4 # string, which scenario this scene is for

    type: PatientInteraction
    casualties:
      - casualty-H
      - casualty-I
    prompt: Choose a treatment, assessment, or tag. # question being asked
    trigger:
      time: 1200

    state:
      setting: 
        initial_setting: >
          You are posted aboard the USS Turtle as the Independent Duty Corpsman. 
          Policies are to prioritize VIP safety and conserve supplies as necessary to last the entire trip.

        casualty_setting: >
          Later that day an officer that fell and broke his arm arrives while you are treating another soldier that broke their leg.																

    options:
      - id: choice1
        value: "Hemorrhage Control on leg"
        target_id: "casualty-H"
        action:
          action_type: Hemorrhage Control
          duration: 60
          cost:
            # Do we have splints in a standard kit?
            - type: Pressure Dressings
              quantity: 1
          effect:
            - injuries:
              - injury_type: Broken Bone
                injury_location: Leg
                injury_severity: -1
      - id: choice2
        value: "Morphine"
        target_id: "casualty-H"
        action:
          action_type: Morphine
          duration: 30
          cost:
            - type: Morphine
              quantity: 1
          effect:
            - injuries: []
              individual_vitals:
                pain: -2
      - id: choice3
        value: "Hemorrhage Control on arm"
        target_id: "casualty-I"
        action:
          action_type: Hemorrhage Control
          duration: 60
          cost:
            # again I think splints would be appropriate if available
            - type: Pressure Dressings
              quantity: 1
          effect:
            - injuries:
              - injury_type: Laceration
                injury_location: Arm
                injury_severity: -1
      - id: choice4
        value: "Morphine"
        target_id: "casualty-I"
        action:
          action_type: Morphine
          duration: 30
          cost:
            - type: Morphine
              quantity: 1
          effect:
            - injuries: []
              individual_vitals:
                pain: -2
  
  - id: data-collection-demo-scene-5 # string, globally unique scene ID
    scenario: data-collection-demo-scenario-4 # string, which scenario this scene is for

    type: PatientInteraction
    casualties:
      - casualty-J
      - casualty-K
    prompt: Choose a treatment, assessment, or tag. # question being asked
    trigger:
      time: 300

    state:
      setting: 
        initial_setting: >
          You are posted aboard the USS Turtle as the Independent Duty Corpsman. 
          Policies are to prioritize VIP safety and conserve supplies as necessary to last the entire trip.

        casualty_setting: >
          The next day, two more submariners that were in an accident in the engine room are brought into the infirmary.																								

    options:
      - id: choice1
        value: "Hemorrhage Control on torso"
        target_id: "casualty-J"
        action:
          action_type: Hemorrhage Control
          duration: 60
          cost:
            # again I think splints would be appropriate if available
            - type: Pressure Dressings
              quantity: 1
          effect:
            - injuries:
              - injury_type: Laceration
                injury_location: Torso
                injury_severity: -1
      - id: choice2
        value: "Morphine"
        target_id: "casualty-J"
        action:
          action_type: Morphine
          duration: 30
          cost:
            - type: Morphine
              quantity: 1
          effect:
            - injuries: []
              individual_vitals:
                pain: -2
      - id: choice3
        value: "Hemorrhage Control on leg"
        target_id: "casualty-K"
        action:
          action_type: Hemorrhage Control
          duration: 60
          cost:
            # Do we have splints in a standard kit?
            - type: Pressure Dressings
              quantity: 1
          effect:
            - injuries:
              - injury_type: Broken Bone
                injury_location: Leg
                injury_severity: -1
      - id: choice4
        value: "Morphine"
        target_id: "casualty-K"
        action:
          action_type: Morphine
          duration: 30
          cost:
            - type: Morphine
              quantity: 1
          effect:
            - injuries: []
              individual_vitals:
                pain: -2